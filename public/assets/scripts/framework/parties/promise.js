var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a};(function(a){function b(){}function c(n,o){return function(){n.apply(o,arguments)}}function d(n){if('object'!==_typeof(this))throw new TypeError('Promises must be constructed via new');if('function'!=typeof n)throw new TypeError('not a function');this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(n,this)}function f(n,o){for(;3===n._state;)n=n._value;return 0===n._state?void n._deferreds.push(o):void(n._handled=!0,d._immediateFn(function(){var p=1===n._state?o.onFulfilled:o.onRejected;if(null===p)return void(1===n._state?g:h)(o.promise,n._value);var q;try{q=p(n._value)}catch(r){return void h(o.promise,r)}g(o.promise,q)}))}function g(n,o){try{if(o===n)throw new TypeError('A promise cannot be resolved with itself.');if(o&&('object'===('undefined'==typeof o?'undefined':_typeof(o))||'function'==typeof o)){var p=o.then;if(o instanceof d)return n._state=3,n._value=o,void j(n);if('function'==typeof p)return void l(c(p,o),n)}n._state=1,n._value=o,j(n)}catch(q){h(n,q)}}function h(n,o){n._state=2,n._value=o,j(n)}function j(n){2===n._state&&0===n._deferreds.length&&d._immediateFn(function(){n._handled||d._unhandledRejectionFn(n._value)});for(var o=0,p=n._deferreds.length;o<p;o++)f(n,n._deferreds[o]);n._deferreds=null}function k(n,o,p){this.onFulfilled='function'==typeof n?n:null,this.onRejected='function'==typeof o?o:null,this.promise=p}function l(n,o){var p=!1;try{n(function(q){p||(p=!0,g(o,q))},function(q){p||(p=!0,h(o,q))})}catch(q){if(p)return;p=!0,h(o,q)}}var m=setTimeout;d.prototype['catch']=function(n){return this.then(null,n)},d.prototype.then=function(n,o){var p=new this.constructor(b);return f(this,new k(n,o,p)),p},d.all=function(n){var o=Array.prototype.slice.call(n);return new d(function(p,q){function r(u,v){try{if(v&&('object'===('undefined'==typeof v?'undefined':_typeof(v))||'function'==typeof v)){var w=v.then;if('function'==typeof w)return void w.call(v,function(x){r(u,x)},q)}o[u]=v,0==--s&&p(o)}catch(x){q(x)}}if(0===o.length)return p([]);for(var s=o.length,t=0;t<o.length;t++)r(t,o[t])})},d.resolve=function(n){return n&&'object'===('undefined'==typeof n?'undefined':_typeof(n))&&n.constructor===d?n:new d(function(o){o(n)})},d.reject=function(n){return new d(function(o,p){p(n)})},d.race=function(n){return new d(function(o,p){for(var q=0,r=n.length;q<r;q++)n[q].then(o,p)})},d._immediateFn='function'==typeof setImmediate&&function(n){setImmediate(n)}||function(n){m(n,0)},d._unhandledRejectionFn=function(o){'undefined'!=typeof console&&console&&console.warn('Possible Unhandled Promise Rejection:',o)},d._setImmediateFn=function(o){d._immediateFn=o},d._setUnhandledRejectionFn=function(o){d._unhandledRejectionFn=o},'undefined'!=typeof module&&module.exports?module.exports=d:!a.Promise&&(a.Promise=d)})(this);